buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.netflix.nebula:gradle-ospackage-plugin:4.4.0'
    }
}

apply plugin: 'application'
apply plugin: 'distribution'
apply plugin: 'nebula.rpm'
 
mainClassName = 'org.janelia.jacsstorage.app.JacsMasterStorageApp'

project(":jacsstorage-masterweb") {
    dependencies {
        implementation project(":jacsstorage-commonweb"),
                       CDI_SE_CORE_LIB,
                       JERSEY_CDI_SERVLET_LIB,
                       JERSEY_INJECT_LIB
    }

    distributions {
        main {
	    contents {
                into('swagger-webapp') {
                    from(new File(project(':jacsstorage-commonweb').projectDir, 'src/main/swagger-webapp')) {
		        include '**'
		    }
                    from(new File(projectDir, 'src/main/swagger-webapp')) {
		        include 'index.html'
		    }
                }
	    }
	}
    }

    task packageRpm(type: Rpm, dependsOn: distTar) {
    }
}

ext.moduleName = 'org.janelia.jacsstorage.masterweb'
